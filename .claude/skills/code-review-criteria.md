---
name: code-review-criteria
description: "コードレビュー、PRレビュー、チェック時に適用するレビュー基準"
---

# コードレビュー基準

コードレビュー時は以下の観点でチェックすること。

## 重要度レベル

| レベル | 対応 | 例 |
|--------|------|-----|
| Critical | 必須修正 | セキュリティ脆弱性、データ損失リスク |
| Major | 修正推奨 | バグ、パフォーマンス問題 |
| Minor | 修正任意 | スタイル、軽微な改善 |
| Info | 情報提供 | 参考情報、提案 |

## レビュー観点

### 1. 機能性

- [ ] 要件を満たしているか
- [ ] エッジケースが考慮されているか
- [ ] エラーハンドリングが適切か

### 2. コード品質

- [ ] 命名規則に従っているか
- [ ] 適切なコメントがあるか
- [ ] 重複コードがないか
- [ ] 責務が明確か
- [ ] 複雑すぎないか

### 3. セキュリティ（OWASP Top 10）

- [ ] **インジェクション**: SQL、OS、LDAP等
- [ ] **認証の不備**: 認証ロジックの問題
- [ ] **機密データの露出**: パスワード、トークンの漏洩
- [ ] **XXE**: XML外部エンティティ
- [ ] **アクセス制御の不備**: 権限チェック漏れ
- [ ] **セキュリティ設定ミス**: デフォルト設定
- [ ] **XSS**: クロスサイトスクリプティング
- [ ] **安全でないデシリアライゼーション**
- [ ] **既知の脆弱性コンポーネント**: 古いライブラリ
- [ ] **不十分なロギング**: 監査ログの不足

### 4. パフォーマンス

- [ ] N+1問題がないか
- [ ] 不要なループがないか
- [ ] 大量データの処理方法は適切か
- [ ] キャッシュが活用されているか

### 5. テスト

- [ ] テストが書かれているか
- [ ] テストカバレッジは十分か
- [ ] エッジケースのテストがあるか

### 6. 可読性

- [ ] コードが読みやすいか
- [ ] ロジックが追いやすいか
- [ ] 適切な抽象化がされているか

## レビューコメントのフォーマット

```markdown
### [重要度] カテゴリ: タイトル

**場所**: `ファイル名:行番号`

**問題**:
（何が問題か）

**改善案**:
（どう直すべきか）

**コード例**:
```
（改善後のコード）
```
```

## 良いレビューのポイント

### やるべきこと

- 具体的に指摘する
- 改善案を提示する
- 良い点も指摘する
- 質問形式で確認する（「〜の理由は？」）

### 避けるべきこと

- 人格攻撃
- 曖昧な指摘
- 主観的すぎる指摘
- 過度な指摘（重要なものに絞る）

## 自動チェック

以下は自動ツールに任せる：
- フォーマット（Prettier, ESLint）
- 基本的な構文エラー
- 型チェック
